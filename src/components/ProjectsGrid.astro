---
interface Project {
  name: string;
  description: string;
  image: string;
  technologies: string[];
  liveUrl?: string;
  githubUrl?: string;
  category: "web" | "mobile" | "fullstack" | "data" | "tool";
  featured: boolean;
}

interface Props {
  projects: readonly Project[];
}

const { projects } = Astro.props;

const getCategoryIcon = (category: string) => {
  switch (category) {
    case "web":
      return "üåê";
    case "mobile":
      return "üì±";
    case "fullstack":
      return "‚ö°";
    case "data":
      return "üìä";
    case "tool":
      return "üîß";
    default:
      return "üíª";
  }
};

const getCategoryColor = (category: string) => {
  switch (category) {
    case "web":
      return "bg-blue-500/20 text-blue-400";
    case "mobile":
      return "bg-green-500/20 text-green-400";
    case "fullstack":
      return "bg-purple-500/20 text-purple-400";
    case "data":
      return "bg-orange-500/20 text-orange-400";
    case "tool":
      return "bg-gray-500/20 text-gray-400";
    default:
      return "bg-primary-500/20 text-primary-400";
  }
};
---

<div class="grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3">
  {
    projects.map((project: Project) => (
      <div class="group relative bg-lightercontentbackground border border-primary-600 rounded-xl overflow-hidden hover:border-primary-400 transition-all duration-300 hover:scale-105">
        {/* Project Image */}
        <div class="relative h-48 overflow-hidden">
          <img
            src={project.image}
            alt={project.name}
            class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"
          />
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent" />

          {/* Category Badge */}
          <div
            class={`absolute top-3 left-3 px-2 py-1 rounded-full text-xs font-medium ${getCategoryColor(
              project.category
            )}`}
          >
            <span class="mr-1">{getCategoryIcon(project.category)}</span>
            {project.category}
          </div>

          {/* Featured Badge */}
          {project.featured && (
            <div class="absolute top-3 right-3 bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded-full text-xs font-medium">
              ‚≠ê Featured
            </div>
          )}
        </div>

        {/* Project Content */}
        <div class="p-6 space-y-4">
          <div>
            <h3 class="text-xl font-bold mb-2 group-hover:text-primary-300 transition-colors">
              {project.name}
            </h3>
            <p class="text-primary-300 text-sm line-clamp-3">
              {project.description}
            </p>
          </div>

          {/* Technologies */}
          <div class="flex flex-wrap gap-1">
            {project.technologies.slice(0, 4).map((tech) => (
              <span class="px-2 py-1 bg-primary-500/10 text-primary-400 rounded text-xs">
                {tech}
              </span>
            ))}
            {project.technologies.length > 4 && (
              <span class="px-2 py-1 bg-primary-500/10 text-primary-400 rounded text-xs">
                +{project.technologies.length - 4}
              </span>
            )}
          </div>

          {/* Action Buttons */}
          <div class="flex gap-3 pt-2">
            {project.liveUrl && (
              <a
                href={project.liveUrl}
                target="_blank"
                rel="noopener noreferrer"
                class="flex-1 bg-primary-500 hover:bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors text-center"
              >
                üîó Live Demo
              </a>
            )}
            {project.githubUrl && (
              <a
                href={project.githubUrl}
                target="_blank"
                rel="noopener noreferrer"
                class="flex-1 border border-primary-500 text-primary-500 hover:bg-primary-500 hover:text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors text-center"
              >
                üìÇ Code
              </a>
            )}
            {!project.liveUrl && !project.githubUrl && (
              <div class="flex-1 bg-gray-500/20 text-gray-400 px-4 py-2 rounded-lg text-sm font-medium text-center">
                üîí Private Project
              </div>
            )}
          </div>
        </div>
      </div>
    ))
  }
</div>
<style>
  .progressive-blur {
    position: absolute;
    z-index: -1;

    backdrop-filter: blur(8px);
    mask: linear-gradient(to bottom, transparent 0%, black 100%);
  }
  .text-shadow-desc {
    text-shadow: 1px 1px 4px black;
  }
  .text-shadow-name {
    text-shadow: 0px 1px 2px black;
  }
</style>
